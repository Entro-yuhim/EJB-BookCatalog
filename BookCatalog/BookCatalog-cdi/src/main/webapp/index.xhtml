<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:rich="http://richfaces.org/rich"
        template="WEB-INF/templates/default.xhtml">
    <ui:define name="page-body">
        <h:head>
            <h:outputStylesheet library="stylesheets" name="jquery.rateyo.min.css"/>
            <h:outputStylesheet library="stylesheets" name="general.css"/>
            <h:outputStylesheet library="stylesheets" name="home.css"/>
        </h:head>

        <h2>
            Welcome to {Book Catalog [Working title]}.
        </h2>
        <p>
            Books currently present in library were rated by our users in the following way:
        </p>
        <h:outputScript library="js" name="jquery.rateyo.min.js"/>
        <rich:dataTable value="#{homeController.bookData}" var="ratingCount" styleClass="basicTable">
            <rich:column style="width: 40%">
                <div class="ratingField">
                    #{ratingCount.rating}
                </div>
            </rich:column>
            <rich:column>
                <p>#{ratingCount.rating} stars</p>
            </rich:column>
            <rich:column style="width: 30%; margin:auto">
                <p>#{ratingCount.count} books</p>
            </rich:column>
        </rich:dataTable>

        <f:verbatim>
            <script type="text/javascript">
                $(document).ready(function () {
                    $('.ratingField').each(function () {
                        var rate = $(this).html();
                        $(this).html("");
                        $(this).rateYo({
                            rating: rate,
                            readOnly: true
                        });
                    });
                });
            </script>
        </f:verbatim>
    </ui:define>
</ui:composition>
